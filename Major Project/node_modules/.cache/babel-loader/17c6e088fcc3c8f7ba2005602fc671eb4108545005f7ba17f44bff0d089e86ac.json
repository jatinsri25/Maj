{"ast":null,"code":"var _jsxFileName = \"/Applications/Maj/Major Project/src/pages/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Webcam from 'react-webcam';\nimport * as faceapi from 'face-api.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const navigate = useNavigate();\n  const webcamRef = useRef(null);\n  const [modelsLoaded, setModelsLoaded] = useState(false);\n  const [authStep, setAuthStep] = useState('credentials');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [faceDetected, setFaceDetected] = useState(false);\n  const [faceMatched, setFaceMatched] = useState(false);\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    aadharNumber: ''\n  });\n\n  // Load face-api models\n  useEffect(() => {\n    const loadModels = async () => {\n      try {\n        setLoading(true);\n        // Make sure models are in the public folder under 'models'\n        const MODEL_URL = '/models';\n        await Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL), faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL), faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL)]);\n        setModelsLoaded(true);\n      } catch (error) {\n        setError('Failed to initialize face detection');\n        console.error('Error loading models:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadModels();\n  }, []);\n\n  // Face detection logic\n  const handleFaceDetection = async () => {\n    if (!webcamRef.current || !modelsLoaded) return;\n    const interval = setInterval(async () => {\n      try {\n        if (webcamRef.current && webcamRef.current.video) {\n          const detection = await faceapi.detectSingleFace(webcamRef.current.video, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks();\n          if (detection) {\n            setFaceDetected(true);\n            clearInterval(interval);\n            setTimeout(() => {\n              setFaceMatched(true);\n              setTimeout(() => navigate('/dashboard'), 1000);\n            }, 1500);\n          }\n        }\n      } catch (error) {\n        console.error('Face detection error:', error);\n      }\n    }, 100);\n    return () => clearInterval(interval);\n  };\n\n  // Rest of the component remains the same...\n  // (Keep all the existing input handling, validation, and rendering code)\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Secure Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 27\n      }, this), authStep === 'face' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"face-auth-container\",\n        children: [!modelsLoaded ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-message\",\n          children: \"Initializing face detection...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"webcam-container\",\n          children: [/*#__PURE__*/_jsxDEV(Webcam, {\n            ref: webcamRef,\n            screenshotFormat: \"image/jpeg\",\n            className: \"webcam\",\n            onUserMedia: handleFaceDetection\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 33\n          }, this), faceDetected && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"face-detected\",\n            children: faceMatched ? 'Face Verified âœ“' : 'Detecting Face...'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 29\n        }, this), faceMatched && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success-message\",\n          children: \"Authentication successful! Redirecting...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"mS0GOr08qcwb3ukVsZB1cyLKpXs=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","Webcam","faceapi","jsxDEV","_jsxDEV","Login","_s","navigate","webcamRef","modelsLoaded","setModelsLoaded","authStep","setAuthStep","loading","setLoading","error","setError","faceDetected","setFaceDetected","faceMatched","setFaceMatched","formData","setFormData","email","password","aadharNumber","loadModels","MODEL_URL","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","console","handleFaceDetection","current","interval","setInterval","video","detection","detectSingleFace","TinyFaceDetectorOptions","withFaceLandmarks","clearInterval","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","screenshotFormat","onUserMedia","_c","$RefreshReg$"],"sources":["/Applications/Maj/Major Project/src/pages/Login.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Webcam from 'react-webcam';\nimport * as faceapi from 'face-api.js';\n\nconst Login = () => {\n    const navigate = useNavigate();\n    const webcamRef = useRef(null);\n\n    const [modelsLoaded, setModelsLoaded] = useState(false);\n    const [authStep, setAuthStep] = useState('credentials');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const [faceDetected, setFaceDetected] = useState(false);\n    const [faceMatched, setFaceMatched] = useState(false);\n\n    const [formData, setFormData] = useState({\n        email: '',\n        password: '',\n        aadharNumber: ''\n    });\n\n    // Load face-api models\n    useEffect(() => {\n        const loadModels = async () => {\n            try {\n                setLoading(true);\n                // Make sure models are in the public folder under 'models'\n                const MODEL_URL = '/models';\n\n                await Promise.all([\n                    faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\n                    faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),\n                    faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL)\n                ]);\n\n                setModelsLoaded(true);\n            } catch (error) {\n                setError('Failed to initialize face detection');\n                console.error('Error loading models:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadModels();\n    }, []);\n\n    // Face detection logic\n    const handleFaceDetection = async () => {\n        if (!webcamRef.current || !modelsLoaded) return;\n\n        const interval = setInterval(async () => {\n            try {\n                if (webcamRef.current && webcamRef.current.video) {\n                    const detection = await faceapi\n                        .detectSingleFace(\n                            webcamRef.current.video,\n                            new faceapi.TinyFaceDetectorOptions()\n                        )\n                        .withFaceLandmarks();\n\n                    if (detection) {\n                        setFaceDetected(true);\n                        clearInterval(interval);\n                        setTimeout(() => {\n                            setFaceMatched(true);\n                            setTimeout(() => navigate('/dashboard'), 1000);\n                        }, 1500);\n                    }\n                }\n            } catch (error) {\n                console.error('Face detection error:', error);\n            }\n        }, 100);\n\n        return () => clearInterval(interval);\n    };\n\n    // Rest of the component remains the same...\n    // (Keep all the existing input handling, validation, and rendering code)\n\n    return (\n        <div className=\"auth-container\">\n            <div className=\"auth-card\">\n                <h2>Secure Login</h2>\n                {error && <div className=\"error-message\">{error}</div>}\n\n                {/* Rest of your JSX remains the same... */}\n\n                {authStep === 'face' && (\n                    <div className=\"face-auth-container\">\n                        {!modelsLoaded ? (\n                            <div className=\"loading-message\">\n                                Initializing face detection...\n                            </div>\n                        ) : (\n                            <div className=\"webcam-container\">\n                                <Webcam\n                                    ref={webcamRef}\n                                    screenshotFormat=\"image/jpeg\"\n                                    className=\"webcam\"\n                                    onUserMedia={handleFaceDetection}\n                                />\n                                {faceDetected && (\n                                    <div className=\"face-detected\">\n                                        {faceMatched ? 'Face Verified âœ“' : 'Detecting Face...'}\n                                    </div>\n                                )}\n                            </div>\n                        )}\n                        {faceMatched && (\n                            <div className=\"success-message\">\n                                Authentication successful! Redirecting...\n                            </div>\n                        )}\n                    </div>\n                )}\n\n                {/* Rest of your JSX remains the same... */}\n            </div>\n        </div>\n    );\n};\n\nexport default Login;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,MAAM,MAAM,cAAc;AACjC,OAAO,KAAKC,OAAO,MAAM,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChB,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAMQ,SAAS,GAAGV,MAAM,CAAC,IAAI,CAAC;EAE9B,MAAM,CAACW,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,aAAa,CAAC;EACvD,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACkB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACoB,YAAY,EAAEC,eAAe,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAM,CAACwB,QAAQ,EAAEC,WAAW,CAAC,GAAGzB,QAAQ,CAAC;IACrC0B,KAAK,EAAE,EAAE;IACTC,QAAQ,EAAE,EAAE;IACZC,YAAY,EAAE;EAClB,CAAC,CAAC;;EAEF;EACA1B,SAAS,CAAC,MAAM;IACZ,MAAM2B,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACAZ,UAAU,CAAC,IAAI,CAAC;QAChB;QACA,MAAMa,SAAS,GAAG,SAAS;QAE3B,MAAMC,OAAO,CAACC,GAAG,CAAC,CACd3B,OAAO,CAAC4B,IAAI,CAACC,gBAAgB,CAACC,WAAW,CAACL,SAAS,CAAC,EACpDzB,OAAO,CAAC4B,IAAI,CAACG,iBAAiB,CAACD,WAAW,CAACL,SAAS,CAAC,EACrDzB,OAAO,CAAC4B,IAAI,CAACI,kBAAkB,CAACF,WAAW,CAACL,SAAS,CAAC,CACzD,CAAC;QAEFjB,eAAe,CAAC,IAAI,CAAC;MACzB,CAAC,CAAC,OAAOK,KAAK,EAAE;QACZC,QAAQ,CAAC,qCAAqC,CAAC;QAC/CmB,OAAO,CAACpB,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MACjD,CAAC,SAAS;QACND,UAAU,CAAC,KAAK,CAAC;MACrB;IACJ,CAAC;IAEDY,UAAU,CAAC,CAAC;EAChB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMU,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAAC5B,SAAS,CAAC6B,OAAO,IAAI,CAAC5B,YAAY,EAAE;IAEzC,MAAM6B,QAAQ,GAAGC,WAAW,CAAC,YAAY;MACrC,IAAI;QACA,IAAI/B,SAAS,CAAC6B,OAAO,IAAI7B,SAAS,CAAC6B,OAAO,CAACG,KAAK,EAAE;UAC9C,MAAMC,SAAS,GAAG,MAAMvC,OAAO,CAC1BwC,gBAAgB,CACblC,SAAS,CAAC6B,OAAO,CAACG,KAAK,EACvB,IAAItC,OAAO,CAACyC,uBAAuB,CAAC,CACxC,CAAC,CACAC,iBAAiB,CAAC,CAAC;UAExB,IAAIH,SAAS,EAAE;YACXvB,eAAe,CAAC,IAAI,CAAC;YACrB2B,aAAa,CAACP,QAAQ,CAAC;YACvBQ,UAAU,CAAC,MAAM;cACb1B,cAAc,CAAC,IAAI,CAAC;cACpB0B,UAAU,CAAC,MAAMvC,QAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC;YAClD,CAAC,EAAE,IAAI,CAAC;UACZ;QACJ;MACJ,CAAC,CAAC,OAAOQ,KAAK,EAAE;QACZoB,OAAO,CAACpB,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MACjD;IACJ,CAAC,EAAE,GAAG,CAAC;IAEP,OAAO,MAAM8B,aAAa,CAACP,QAAQ,CAAC;EACxC,CAAC;;EAED;EACA;;EAEA,oBACIlC,OAAA;IAAK2C,SAAS,EAAC,gBAAgB;IAAAC,QAAA,eAC3B5C,OAAA;MAAK2C,SAAS,EAAC,WAAW;MAAAC,QAAA,gBACtB5C,OAAA;QAAA4C,QAAA,EAAI;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACpBrC,KAAK,iBAAIX,OAAA;QAAK2C,SAAS,EAAC,eAAe;QAAAC,QAAA,EAAEjC;MAAK;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,EAIrDzC,QAAQ,KAAK,MAAM,iBAChBP,OAAA;QAAK2C,SAAS,EAAC,qBAAqB;QAAAC,QAAA,GAC/B,CAACvC,YAAY,gBACVL,OAAA;UAAK2C,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAAC;QAEjC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,gBAENhD,OAAA;UAAK2C,SAAS,EAAC,kBAAkB;UAAAC,QAAA,gBAC7B5C,OAAA,CAACH,MAAM;YACHoD,GAAG,EAAE7C,SAAU;YACf8C,gBAAgB,EAAC,YAAY;YAC7BP,SAAS,EAAC,QAAQ;YAClBQ,WAAW,EAAEnB;UAAoB;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpC,CAAC,EACDnC,YAAY,iBACTb,OAAA;YAAK2C,SAAS,EAAC,eAAe;YAAAC,QAAA,EACzB7B,WAAW,GAAG,iBAAiB,GAAG;UAAmB;YAAA8B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrD,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CACR,EACAjC,WAAW,iBACRf,OAAA;UAAK2C,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAAC;QAEjC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CACR;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAGA;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAAC9C,EAAA,CAtHID,KAAK;EAAA,QACUL,WAAW;AAAA;AAAAwD,EAAA,GAD1BnD,KAAK;AAwHX,eAAeA,KAAK;AAAC,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}